import{C as B,k as b,g as u,o as m,a as o,u as s,m as H,w as d,b as r,e as c,F as p,l as v,t as h,f as V,n as E}from"./app-CCJcod2T.js";import{_ as M}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CM4iPQ0w.js";import{_,a as q,b as f}from"./TextInput.vue_vue_type_script_setup_true_lang-CHc_z21z.js";import{P as k}from"./PrimaryButton-Bdb1pigu.js";import{_ as P,a as U}from"./Select-JQkuJq_B.js";import{_ as $}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-Dl8u4Dsj.js";import"./ApplicationLogo-Dq86TXs6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"p-12"},Z={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},D={class:"mt-2"},F={class:"mt-2"},S={class:"mt-2"},z={class:"mt-2"},I={class:"mt-2"},L=["value"],T={class:"mt-2"},G=["value"],J={class:"mt-2"},K=["value"],O={class:"mt-4 flex items-center justify-center"},le={__name:"EditProject",props:{project:Array,materials_for_project:Array,equipments_for_project:Array,construction_crews_for_project:Array,equipments:Array,materials:Array,construction_crews:Array},setup(w){const i=w,e=B({projectId:i.project.id,name:i.project.name,description:i.project.description,image:null,end_date:i.project.end_date,materials:[],equipments:[],construction_crews:[]});function A(){e.transform(n=>({...n,_method:"patch"})).post(route("project.update"))}const g=b({count:0}),C=b({count:0}),j=b({count:0});function y(n,t){n.count++,t.push({id:"",count:""})}function x(n,t,l){t.splice(n-1,1),l.count--}for(let n=0;n<i.materials_for_project.length;n++)g.value.count++,e.materials.push({id:i.materials_for_project[n].id,material_id:i.materials_for_project[n].material_id,count:i.materials_for_project[n].count});for(let n=0;n<i.equipments_for_project.length;n++)C.value.count++,e.equipments.push({id:i.equipments_for_project[n].id,equipment_id:i.equipments_for_project[n].equipment_id,count:i.equipments_for_project[n].count});for(let n=0;n<i.construction_crews_for_project.length;n++)j.value.count++,e.construction_crews.push({id:i.construction_crews_for_project[n].id,construction_crew_id:i.construction_crews_for_project[n].construction_crew_id,count:i.construction_crews_for_project[n].count});return(n,t)=>(m(),u(p,null,[o(s(H),{title:"Create Project"}),o(M,null,{default:d(()=>[r("div",N,[r("div",Z,[r("form",{onSubmit:c(A,["prevent"]),enctype:"multipart/form-data"},[t[14]||(t[14]=r("div",{class:"w-full flex justify-center items-center"},[r("h2",{class:"text-2xl"},"Edit Project")],-1)),r("div",D,[o(_,{for:"name",value:"Name"}),o(q,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:s(e).name,"onUpdate:modelValue":t[0]||(t[0]=l=>s(e).name=l),required:""},null,8,["modelValue"]),o(f,{class:"mt-2",message:s(e).errors.name},null,8,["message"])]),r("div",F,[o(_,{for:"description",value:"Description"}),o(P,{id:"description",class:"mt-1 block w-full",modelValue:s(e).description,"onUpdate:modelValue":t[1]||(t[1]=l=>s(e).description=l)},null,8,["modelValue"]),o(f,{class:"mt-2",message:s(e).errors.description},null,8,["message"])]),r("div",S,[o(_,{for:"image",value:"Update image"}),r("input",{id:"image",name:"image",type:"file",class:"mt-1 block w-full",onChange:t[2]||(t[2]=l=>s(e).image=l.target.files[0]),accept:"image/png, image/jpeg, image/jpg, image/webp"},null,32),o(f,{class:"mt-2",message:s(e).errors.image},null,8,["message"])]),r("div",z,[o(_,{for:"end_date",value:"End date"}),o(q,{id:"end_date",type:"date",class:"mt-1 block w-full",modelValue:s(e).end_date,"onUpdate:modelValue":t[3]||(t[3]=l=>s(e).end_date=l),required:""},null,8,["modelValue"]),o(f,{class:"mt-2",message:s(e).errors.end_date},null,8,["message"])]),r("div",I,[o(_,{value:"Materials"}),(m(!0),u(p,null,v(g.value.count,l=>(m(),u("div",{key:l,class:"flex justify-between items-center w-full gap-2 mt-1"},[o(U,{required:"",class:"block w-full",modelValue:s(e).materials[l-1].material_id,"onUpdate:modelValue":a=>s(e).materials[l-1].material_id=a},{default:d(()=>[(m(!0),u(p,null,v(w.materials,a=>(m(),u("option",{value:a.id},h(a.name),9,L))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"]),o(q,{required:"",id:"end_date",type:"number",class:"mt-1 block w-full",modelValue:s(e).materials[l-1].count,"onUpdate:modelValue":a=>s(e).materials[l-1].count=a,placeholder:"Count"},null,8,["modelValue","onUpdate:modelValue"]),o($,{onClick:c(a=>x(l,s(e).materials,g.value),["prevent"])},{default:d(()=>t[7]||(t[7]=[r("svg",{width:"15",height:"5",viewBox:"0 0 15 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M13.125 0H1.875C1.37772 0 0.900805 0.263393 0.549175 0.732234C0.197544 1.20107 0 1.83696 0 2.5C0 3.16304 0.197544 3.79893 0.549175 4.26777C0.900805 4.73661 1.37772 5 1.875 5H13.125C13.6223 5 14.0992 4.73661 14.4508 4.26777C14.8025 3.79893 15 3.16304 15 2.5C15 1.83696 14.8025 1.20107 14.4508 0.732234C14.0992 0.263393 13.6223 0 13.125 0Z",fill:"white"})],-1)])),_:2},1032,["onClick"])]))),128)),o(f,{class:"mt-2",message:s(e).errors.materials},null,8,["message"]),o(k,{class:"mt-1",onClick:t[4]||(t[4]=c(l=>y(g.value,s(e).materials),["prevent"]))},{default:d(()=>t[8]||(t[8]=[V("Add material")])),_:1})]),r("div",T,[o(_,{value:"Equipments"}),(m(!0),u(p,null,v(C.value.count,l=>(m(),u("div",{key:l,class:"flex justify-between items-center w-full gap-2 mt-1"},[o(U,{class:"block w-full",modelValue:s(e).equipments[l-1].equipment_id,"onUpdate:modelValue":a=>s(e).equipments[l-1].equipment_id=a,required:""},{default:d(()=>[(m(!0),u(p,null,v(w.equipments,a=>(m(),u("option",{value:a.id},h(a.name),9,G))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"]),o(q,{required:"",id:"end_date",type:"number",class:"mt-1 block w-full",modelValue:s(e).equipments[l-1].count,"onUpdate:modelValue":a=>s(e).equipments[l-1].count=a,placeholder:"Count"},null,8,["modelValue","onUpdate:modelValue"]),o($,{onClick:c(a=>x(l,s(e).equipments,C.value),["prevent"])},{default:d(()=>t[9]||(t[9]=[r("svg",{width:"15",height:"5",viewBox:"0 0 15 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M13.125 0H1.875C1.37772 0 0.900805 0.263393 0.549175 0.732234C0.197544 1.20107 0 1.83696 0 2.5C0 3.16304 0.197544 3.79893 0.549175 4.26777C0.900805 4.73661 1.37772 5 1.875 5H13.125C13.6223 5 14.0992 4.73661 14.4508 4.26777C14.8025 3.79893 15 3.16304 15 2.5C15 1.83696 14.8025 1.20107 14.4508 0.732234C14.0992 0.263393 13.6223 0 13.125 0Z",fill:"white"})],-1)])),_:2},1032,["onClick"])]))),128)),o(f,{class:"mt-2",message:s(e).errors.equipments},null,8,["message"]),o(k,{class:"mt-1",onClick:t[5]||(t[5]=c(l=>y(C.value,s(e).equipments),["prevent"]))},{default:d(()=>t[10]||(t[10]=[V("Add equipment")])),_:1})]),r("div",J,[o(_,{value:"Construction Crews"}),(m(!0),u(p,null,v(j.value.count,l=>(m(),u("div",{key:l,class:"flex justify-between items-center w-full gap-2 mt-1"},[o(U,{required:"",class:"block w-full",modelValue:s(e).construction_crews[l-1].construction_crew_id,"onUpdate:modelValue":a=>s(e).construction_crews[l-1].construction_crew_id=a},{default:d(()=>[(m(!0),u(p,null,v(w.construction_crews,a=>(m(),u("option",{value:a.id},h(a.name),9,K))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"]),o($,{onClick:c(a=>x(l,s(e).construction_crews,j.value),["prevent"])},{default:d(()=>t[11]||(t[11]=[r("svg",{width:"15",height:"5",viewBox:"0 0 15 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M13.125 0H1.875C1.37772 0 0.900805 0.263393 0.549175 0.732234C0.197544 1.20107 0 1.83696 0 2.5C0 3.16304 0.197544 3.79893 0.549175 4.26777C0.900805 4.73661 1.37772 5 1.875 5H13.125C13.6223 5 14.0992 4.73661 14.4508 4.26777C14.8025 3.79893 15 3.16304 15 2.5C15 1.83696 14.8025 1.20107 14.4508 0.732234C14.0992 0.263393 13.6223 0 13.125 0Z",fill:"white"})],-1)])),_:2},1032,["onClick"])]))),128)),o(f,{class:"mt-2",message:s(e).errors.materials},null,8,["message"]),o(k,{class:"mt-1",onClick:t[6]||(t[6]=c(l=>y(j.value,s(e).construction_crews),["prevent"]))},{default:d(()=>t[12]||(t[12]=[V("Add construction crew")])),_:1})]),r("div",O,[o(k,{class:E(["ms-4",{"opacity-25":s(e).processing}]),disabled:s(e).processing},{default:d(()=>t[13]||(t[13]=[V(" Update ")])),_:1},8,["class","disabled"])])],32)])])]),_:1})],64))}};export{le as default};
